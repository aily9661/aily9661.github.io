<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Counter App</title>
</head>
<body>
	<h1>Counter App</h1>
	<p>Counter: <span id="counter">0</span></p>
	<button id="increment-button">Increment</button>
	<p>Username: <input type="text" id="username"></p>
	<p>Password: <input type="password" id="password"></p>
	<button id="save-button">Save</button>
	<button id="restore-button">Restore</button>
	<script>
		let counter = 0;

		// Get the elements
		const counterEl = document.getElementById("counter");
		const incrementButton = document.getElementById("increment-button");
		const usernameInput = document.getElementById("username");
		const passwordInput = document.getElementById("password");
		const saveButton = document.getElementById("save-button");
		const restoreButton = document.getElementById("restore-button");

		// Add event listeners
		incrementButton.addEventListener("click", () => {
			counter++;
			counterEl.textContent = counter;
		});

		saveButton.addEventListener("click", () => {
			const username = usernameInput.value.trim();
			const password = passwordInput.value.trim();
			if (username && password) {
				const data = loadJson();
				if (!data[username]) {
					data[username] = {
						"password": password,
						"counter": counter
					};
				} else if (data[username]["password"] === password) {
					data[username]["counter"] = counter;
				} else {
					alert("Incorrect password.");
					return;
				}
				saveJson(data);
			}
		});

		restoreButton.addEventListener("click", () => {
			const username = usernameInput.value.trim();
			const password = passwordInput.value.trim();
			if (username && password) {
				const data = loadJson();
				if (data[username] && data[username]["password"] === password) {
					counter = data[username]["counter"];
					counterEl.textContent = counter;
				} else {
					alert("Incorrect username or password.");
				}
			}
		});

		// Load and save JSON data
		function loadJson() {
			const jsonStr = localStorage.getItem("data");
			return jsonStr ? JSON.parse(jsonStr) : {};
		}

		function saveJson(data) {
			localStorage.setItem("data", JSON.stringify(data));
		}
	</script>
</body>
</html>
